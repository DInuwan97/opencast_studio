(this["webpackJsonpopencast-react-studio"]=this["webpackJsonpopencast-react-studio"]||[]).push([[4],{532:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(85),o=n(2),a=n.n(o),i=n(112),l=n(79),s=n(213),d=n(13);const u=()=>({mediaDevices:[],audioAllowed:null,audioStream:null,audioUnexpectedEnd:!1,audioSupported:Object(d.f)(),displayAllowed:null,displayStream:null,displayUnexpectedEnd:!1,displaySupported:Object(d.d)(),userAllowed:null,userStream:null,userUnexpectedEnd:!1,userSupported:Object(d.f)(),videoChoice:"none",audioChoice:"none",isRecording:!1,prematureRecordingEnd:!1,recordings:[],title:"",presenter:"",start:null,end:null,upload:{error:null,state:"not_uploaded",secondsLeft:null,currentProgress:0}}),b=(e,t)=>{switch(t.type){case"UPDATE_MEDIA_DEVICES":return{...e,mediaDevices:t.payload};case"CHOOSE_AUDIO":return{...e,audioChoice:t.payload};case"CHOOSE_VIDEO":return{...e,videoChoice:t.payload};case"SHARE_AUDIO":return{...e,audioStream:t.payload,audioAllowed:!0,audioUnexpectedEnd:!1};case"BLOCK_AUDIO":return{...e,audioStream:null,audioAllowed:!1,audioUnexpectedEnd:!1};case"UNSHARE_AUDIO":return{...e,audioStream:null,audioUnexpectedEnd:!1};case"AUDIO_UNEXPETED_END":return{...e,audioStream:null,audioUnexpectedEnd:!0};case"SHARE_DISPLAY":return{...e,displayStream:t.payload,displayAllowed:!0,displayUnexpectedEnd:!1};case"BLOCK_DISPLAY":return{...e,displayStream:null,displayAllowed:!1,displayUnexpectedEnd:!1};case"UNSHARE_DISPLAY":return{...e,displayStream:null,displayUnexpectedEnd:!1};case"DISPLAY_UNEXPETED_END":return{...e,displayStream:null,displayUnexpectedEnd:!0};case"SHARE_USER":return{...e,userStream:t.payload,userAllowed:!0,userUnexpectedEnd:!1};case"BLOCK_USER":return{...e,userStream:null,userAllowed:!1,userUnexpectedEnd:!1};case"UNSHARE_USER":return{...e,userStream:null,userUnexpectedEnd:!1};case"USER_UNEXPETED_END":return{...e,userStream:null,userUnexpectedEnd:!0};case"START_RECORDING":return{...e,isRecording:!0};case"STOP_RECORDING":return{...e,isRecording:!1};case"STOP_RECORDING_PREMATURELY":return{...e,isRecording:!1,prematureRecordingEnd:!0};case"CLEAR_RECORDINGS":return{...e,recordings:[],prematureRecordingEnd:!1};case"ADD_RECORDING":const n=[...e.recordings.filter(e=>e.deviceType!==t.payload.deviceType),t.payload];return{...e,recordings:n};case"UPLOAD_ERROR":return{...e,upload:{...e.upload,error:t.payload,state:"error"}};case"UPLOAD_REQUEST":return{...e,upload:{...e.upload,error:null,state:"uploading"}};case"UPLOAD_SUCCESS":return{...e,upload:{...e.upload,error:null,state:"uploaded"}};case"UPLOAD_PROGRESS_UPDATE":return{...e,upload:{...e.upload,secondsLeft:t.payload.secondsLeft,currentProgress:t.payload.currentProgress}};case"MARK_DOWNLOADED":const c=e.recordings.map((e,n)=>n===t.payload?{...e,downloaded:!0}:e);return{...e,recordings:c};case"UPDATE_TITLE":return{...e,title:t.payload};case"UPDATE_PRESENTER":return{...e,presenter:t.payload};case"UPDATE_START":return{...e,start:t.payload};case"UPDATE_END":return{...e,end:t.payload};case"RESET":return u();default:throw new Error}},p=Object(o.createContext)(null),g=Object(o.createContext)(null),O=({children:e})=>{const[t,n]=Object(o.useReducer)(b,u());return Object(c.c)(g.Provider,{value:n},Object(c.c)(p.Provider,{value:t},e))},m=()=>Object(o.useContext)(g),h=(e=null)=>{const t=Object(o.useContext)(p);return null!==e?t[e]:t};var j=n(35),v=n(82),x=n(83);function f(){return Object(c.c)("article",null,Object(c.c)(j.b.h2,null,"ELAN e.V."),Object(c.c)(j.b.p,null,"The e-learning academic network (ELAN e.V.) is a German non-profit organization supporting higher-education organizations in all matters related to e-learning. Our services include practical tips about how to use digital technologies in education, legal advice and development of free, open-source software to support education."),Object(c.c)(j.b.h3,null,"Contact"),Object(c.c)(j.b.p,null,"Dr. Norbert Kleinefeld, Gesch\xe4ftsf\xfchrer",Object(c.c)("br",null),"Karlstr. 23",Object(c.c)("br",null),"D-26123 Oldenburg"),Object(c.c)(j.b.p,null,Object(c.c)(v.a,{icon:x.l})," ",Object(c.c)(j.b.a,{href:"https://elan-ev.de"},"elan-ev.de"),Object(c.c)("br",null),Object(c.c)(v.a,{icon:x.i})," ",Object(c.c)(j.b.a,{href:"mailto:kontakt@elan-ev.de"},"kontakt@elan-ev.de"),Object(c.c)("br",null),Object(c.c)(v.a,{icon:x.r})," ",Object(c.c)(j.b.a,{href:"tel:+4944199866610"},"+49\u2009441 998\u2009666\u200910")),Object(c.c)(j.b.p,null,"Registergericht: Amtsgericht Oldenburg",Object(c.c)("br",null),"Registernummer: VR 200644",Object(c.c)("br",null),"USt.-ID-Nr.: DE 265901392"))}var y=function(e){return Object(c.c)(r.d,null,Object(c.c)("article",{sx:{maxWidth:"900px",margin:"0 auto"}},Object(c.c)("header",null,Object(c.c)(j.b.h1,null,"Opencast Studio")),Object(c.c)(j.b.p,null,"A web-based recording studio for ",Object(c.c)(j.b.a,{href:"https://opencast.org"},"Opencast"),"."),Object(c.c)(j.b.p,null,"Opencast Studio allows you to record your camera, your display and your microphone\u02bcs audio. You can then either download your recordings or upload them directly to an Opencast instance (usually the one of your university)."),Object(c.c)(j.b.p,null,"This is free software under the terms of the"," ",Object(c.c)(j.b.a,{href:"https://github.com/elan-ev/opencast-studio/blob/master/LICENSE"},"MIT License")," ","developed by the ",Object(c.c)(j.b.a,{href:"https://elan-ev.de"},"ELAN e.V.")," in cooperation with the ",Object(c.c)(j.b.a,{href:"https://ethz.ch"},"ETH Z\xfcrich"),"."),Object(c.c)(j.b.h2,null,"How it works"),Object(c.c)(j.b.p,null,"Opencast Studio uses the recording capabilities built into modern browsers to record audio and video streams. The recording happens in the user\u02bcs browser and no server is involved in the recording."),"1"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GIT_SHA:"1d709c6",REACT_APP_BUILD_DATE:"2021-03-13"}).REACT_APP_INCLUDE_LEGAL_NOTICES&&Object(c.c)(a.a.Fragment,null,Object(c.c)(j.b.h2,null,"Support"),Object(c.c)(j.b.p,null,"If you are experiencing any difficulties or found any bugs, please take a look at the"," ",Object(c.c)(j.b.a,{href:"https://github.com/elan-ev/opencast-studio/issues"},"issue tracker on GitHub"),". Before filing a new issue, please check if one about your topic already exists. We regularly check incoming issues and do our best to address bugs in a timely manner."),Object(c.c)(j.b.p,null,"If you are interested in additional development or want to support the development of Opencast Studio, please contact"," ",Object(c.c)(j.b.a,{href:"mailto:opencast-support@elan-ev.de"},"opencast-support@elan-ev.de"),".")),Object(c.c)(j.b.h2,null,"Credits"),Object(c.c)(j.b.p,null,"Thanks to the following people and institutions for contributing to this project:"),Object(c.c)("ul",null,Object(c.c)("li",null,Object(c.c)(j.b.a,{href:"https://github.com/slampunk"},"Duncan Smith")," for starting this project"),Object(c.c)("li",null,Object(c.c)(j.b.a,{href:"https://github.com/cilt-uct"},"University of Cape Town (CILT)")," ","for letting Duncan start the project"),Object(c.c)("li",null,Object(c.c)(j.b.a,{href:"https://ethz.ch"},"ETH Z\xfcrich")," for financial support and testing"),Object(c.c)("li",null,Object(c.c)(j.b.a,{href:"https://github.com/elan-ev"},"ELAN e.V.")," for the re-implementation and the ongoing development"),Object(c.c)("li",null,"And many members from the Opencast community who helped along the way.")),"1"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_GIT_SHA:"1d709c6",REACT_APP_BUILD_DATE:"2021-03-13"}).REACT_APP_INCLUDE_LEGAL_NOTICES&&Object(c.c)(f,null),Object(c.c)(j.b.h2,null,"Version"),Object(c.c)(j.b.p,null,"Build date ","2021-03-13",", commit"," ",Object(c.c)(j.b.a,{"aria-label":"Git commit on GitHub",href:"https://github.com/elan-ev/opencast-studio/commit/1d709c6"},"1d709c6"),".")))},w=n(527),S=n(530),E=n(219);function C(){const{isRecording:e}=h();return Object(c.c)("header",{sx:{height:e=>e.heights.headerHeight,lineHeight:e=>e.heights.headerHeight,color:"background",display:"flex",justifyContent:"space-between",position:"relative",zIndex:3}},Object(c.c)("div",{sx:{backgroundColor:"#19BCDC",position:"absolute",zIndex:-3,height:"100%",width:"100%"}}),e&&Object(c.c)("div",{sx:{backgroundColor:"#19BCDC",position:"absolute",zIndex:20,height:"100%",width:"100%",opacity:.75}}),Object(c.c)(k,null),Object(c.c)(R,null))}const k=()=>{const e=Object(l.h)();return Object(c.c)(i.b,{to:{pathname:"/",search:e.search}},Object(c.c)("picture",{sx:{display:"block",height:e=>e.heights.headerHeight}},Object(c.c)("source",{media:"(min-width: 920px)",srcSet:"/Eduscope Logo_2.svg",style:{width:150}}),Object(c.c)("img",{src:"/Eduscope Logo_2.svg",alt:"Opencast Studio",sx:{height:e=>e.heights.headerHeight},style:{width:150}})))},D=({target:e,children:t,icon:n,...r})=>{const o=Object(l.h)();return Object(c.c)(i.c,Object.assign({to:{pathname:e,search:o.search},exact:!0,activeStyle:{backgroundColor:"#19BCDC"},sx:{color:"white",pl:[3,"10px"],pr:[3,"14px"],textDecoration:"none",fontSize:"18px",height:["auto","100%"],borderLeft:["none",e=>`1px solid ${e.colors.gray[3]}`],display:["block","inline-block"],width:["100%","auto"],"&:hover":{backgroundColor:"gray.1"}}},r),Object(c.c)("div",{sx:{width:"20px",display:"inline-block",textAlign:"right",mr:[3,3,2]}},Object(c.c)(v.a,{icon:n})),t)},R=e=>{const[t,n]=Object(o.useState)(!1),r=()=>n(!1),{t:a}=Object(S.a)(),[i,l]=Object(o.useState)(""),[s,d]=Object(o.useState)(""),[u,b]=Object(o.useState)("");if(null!==localStorage.getItem("userLoginToken")){const e=localStorage.userLoginToken,t=Object(E.a)(e);setTimeout(()=>{l(t.firstName),d(t.lastName),b(t.userType)},100)}const p=Object(c.c)("div",null,Object(c.c)(D,{title:"SignUp",target:"/register",icon:x.A},"Sign Up"),Object(c.c)(D,{title:"SignIn",target:"/login"},"Sign In")),g=Object(c.c)(D,null,Object(c.c)(w.a,{round:"60%",size:"40",name:i+" "+s,style:{marginRight:5}})," Hello ",i);return Object(c.c)(o.Fragment,null,Object(c.c)("button",{onClick:()=>n(!t),title:a("nav-open-menu-button"),sx:{display:["inline-block","none"],border:e=>`2px solid ${e.colors.gray[3]}`,borderRadius:"10px",color:"white",my:1,px:3,mx:1,fontSize:"20px",whiteSpace:"nowrap",backgroundColor:"transparent","&:hover":{backgroundColor:"gray.1"},"&:active":{}}},a("nav-open-menu-button"),Object(c.c)("span",{sx:{width:"23px",display:"inline-block"}},Object(c.c)(v.a,{icon:t?x.w:x.a,sx:{ml:"10px"}}))),Object(c.c)("nav",{ref:e=>{e&&(e.style.height=t?e.scrollHeight+"px":"")},sx:{overflow:"hidden",zIndex:10,height:["0px","100% !important"],top:[e=>e.heights.headerHeight,e=>e.heights.headerHeight,0],position:["absolute","static"],width:["100%","auto"],backgroundColor:["DodgerBlue","none"],transition:["height 0.25s ease-out 0s","none"],scrollX:["none","auto"]}},Object(c.c)(D,{title:a("nav-recording"),target:"/",icon:x.B,onClick:r},a("nav-recording")),Object(c.c)(D,{title:a("nav-settings"),target:"/settings",icon:x.C,onClick:r},a("nav-settings")),Object(c.c)(D,{title:a("nav-about"),target:"/about",icon:x.m,onClick:r},a("nav-about")),localStorage.userLoginToken?g:p),t&&Object(c.c)("div",{onClick:r,ref:e=>e&&(e.style.opacity=1),sx:{display:[t?"block":"none","none"],backgroundColor:"rgba(0, 0, 0, 0.7)",position:"fixed",zIndex:-10,top:0,bottom:0,left:0,right:0,opacity:0,transition:"opacity 0.25s ease-out 0s"}}))};function A({activeStep:e,updateActiveStep:t,...n}){var r;const o={currentStep:e+1,totalSteps:(null===(r=n.children)||void 0===r?void 0:r.length)||0,nextStep:function(){s(e+1)},previousStep:function(){s(e-1)},goToStep:l,firstStep:function(){l(1)},lastStep:function(){l(n.children.length)}},i=a.a.Children.map(n.children,(t,n)=>(o.isActive=n===e,o.isActive?function({type:e}){return"function"===typeof e||"object"===typeof e}(t)?a.a.cloneElement(t,o):t:null));return Object(c.c)(a.a.Fragment,null,i);function l(e){s(e-1)}function s(c){e!==c&&(!function(e,t){return e<0||e>=t.length}(c,n.children)?t(c):console.error(`${c+1} is an invalid step`))}}const T=(e,t,n)=>{var c;const r=e&&{max:e},o=(null===t||void 0===t||null===(c=t.height)||void 0===c?void 0:c.ideal)||n;return{height:{...r,...o&&(e?{ideal:Math.min(o,e)}:{ideal:o})}}};async function U(e,t=null){try{const n=await navigator.mediaDevices.getUserMedia({audio:!t||{deviceId:t},video:!1});n.getTracks().forEach(t=>{t.onended=()=>{e({type:"AUDIO_UNEXPETED_END"})}}),e({type:"SHARE_AUDIO",payload:n})}catch(n){console.error("Error: "+n),e({type:"BLOCK_AUDIO"})}}async function P(e,t,n={},c){var r;const o=c?{frameRate:{max:c}}:{},a=T(null===(r=t.display)||void 0===r?void 0:r.maxHeight,n);console.log("Display FrameRAte : "+c);const i={video:{cursor:"always",...o,...n,...a},audio:!1};setTimeout(()=>{console.log("Frame Rate startDisplayCapture : 70")},1e3);try{const t=await navigator.mediaDevices.getDisplayMedia(i);t.getTracks().forEach(t=>{t.onended=()=>{e({type:"DISPLAY_UNEXPETED_END"})}}),e({type:"SHARE_DISPLAY",payload:t})}catch(l){console.error("Error: "+l),e({type:"BLOCK_DISPLAY"})}}async function I(e,t,n,c){var r;const o=c?{frameRate:{max:c}}:{},a=T(null===(r=t.camera)||void 0===r?void 0:r.maxHeight,n,1080),i={video:{facingMode:"user",...n,...o,...a},audio:!1};try{const t=await navigator.mediaDevices.getUserMedia(i);t.getTracks().forEach(t=>{t.onended=()=>{e({type:"USER_UNEXPETED_END"})}}),e({type:"SHARE_USER",payload:t})}catch(l){console.error("Error: "+l),e({type:"BLOCK_USER"})}}function _(e,t){null===e||void 0===e||e.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_AUDIO"})}function L(e,t){null===e||void 0===e||e.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_DISPLAY"})}function H(e,t){null===e||void 0===e||e.getTracks().forEach(e=>e.stop()),t({type:"UNSHARE_USER"})}var z=n(167),N=n.n(z),W=n(30),F=n.n(W);const $=({children:e})=>Object(c.c)("div",{sx:{display:"flex",flexDirection:"column",flex:"1 1 auto",justifyContent:"space-between",p:3,pt:[2,2,3],"& > h1":{textAlign:"center",fontSize:["24px","27px","32px"]}}},e);function M({prev:e=null,next:t=null,children:n}){const{t:o}=Object(S.a)();return Object(c.c)(r.e,{sx:{alignItems:"end",minHeight:"40px"}},Object(c.c)(r.a,{sx:{flex:"1 1 0",textAlign:"left"}},e&&Object(c.c)(r.b,{sx:{whiteSpace:"nowrap",...!0===e.danger?{variant:"buttons.danger"}:{variant:"buttons.text"}},onClick:e.onClick,disabled:e.disabled,danger:e.danger||!1,title:o(e.label||"back-button-label")},Object(c.c)(v.a,{icon:x.b}),o(e.label||"back-button-label"))),Object(c.c)(r.a,null,n),Object(c.c)(r.a,{sx:{flex:"1 1 0",textAlign:"right"}},t&&Object(c.c)(r.b,{sx:{whiteSpace:"nowrap","& svg":{mr:0,ml:2},...!0===t.danger?{variant:"buttons.danger"}:{}},onClick:t.onClick,disabled:t.disabled,title:o(t.label||"next-button-label")},o(t.label||"next-button-label"),Object(c.c)(v.a,{icon:x.c}))))}const B=a.a.createContext(null),G=()=>a.a.useContext(B);function q({gap:e=0,minWidth:t=180,minHeight:n=140,children:r}){const{ref:a,width:i=1,height:l=1}=N()(),[,s]=Object(o.useState)(0),d=Object(o.useRef)(r.map(()=>[void 0,void 0])),u=e=>{e.forEach(([e,t],n)=>{e&&t&&(d.current[n]=[e,t])})};let b=r.map(e=>e.dimensions());u(b);const p=()=>{const e=r.map(e=>e.dimensions());F()(e,b)||(b=e,u(b),s(e=>e+1))},g=([e,t])=>e&&t?e/t:16/9;switch(r.length){case 1:{const e=r[0],o=g(d.current[0]);let s,u;return i>l*o?(u=l,s=l*o):(s=i,u=i/o),Object(c.c)(B.Provider,{value:p},Object(c.c)("div",{ref:a,sx:{flex:"1 0 0",minHeight:n,display:"flex"}},Object(c.c)("div",{sx:{height:u,width:s,minWidth:`${t}px`,margin:"auto"}},e.body)))}case 2:{const o=d.current.map(e=>g(e)),{rowWidths:s,rowHeights:u}=(()=>{const t=i-e,n=o[0]+o[1];if(t>l*n)return{rowHeights:Array(2).fill(l),rowWidths:o.map(e=>l*e)};{const e=t/n;return{rowHeights:r.map(t=>e),rowWidths:o.map(t=>e*t)}}})(),{colWidths:b,colHeights:O}=(()=>{const t=l-e,n=1/(1/o[0]+1/o[1]);if(i>t*n){const e=t*n;return{colHeights:r.map((t,n)=>e/o[n]),colWidths:Array(2).fill(e)}}return{colHeights:r.map((e,t)=>i/o[t]),colWidths:Array(2).fill(i)}})();let m,h,j;return s[0]*u[0]+s[1]*u[1]>b[0]*O[0]+b[1]*O[1]?(j="row",m=s,h=u):(j="column",m=b,h=O),Object(c.c)(B.Provider,{value:p},Object(c.c)("div",{ref:a,sx:{flex:"1 0 0",display:"flex",flexDirection:j,justifyContent:"space-between",minHeight:n}},Object(c.c)("div",{sx:{height:h[0],width:m[0],minWidth:`${t}px`,margin:"auto"}},r[0].body),Object(c.c)("div",{sx:{height:h[1],width:m[1],minWidth:`${t}px`,margin:"auto"}},r[1].body)))}default:return Object(c.c)("p",null,"Internal error: too few or too many video streams")}}var V=({isDanger:e,...t})=>Object(c.c)("div",Object.assign({sx:{":not(:last-child)":{marginBottom:"1.5rem"},backgroundColor:e?"error":"gray.3",color:e?"background":"currentColor",borderRadius:2,padding:3,position:"relative"}},t)),K=n(263),X=n.n(K);function Y({stream:e}){const t=Object(o.useRef)();return Object(o.useEffect)(()=>{const n=t.current;if(n){const t=n.getContext("2d");t.lineWidth=2,t.strokeStyle="#f1c40f";const c=(new(window.AudioContext||window.webkitAudioContext)).createMediaStreamSource(e),r=new X.a(c,{fftSize:1024});return r.animate(t),()=>r.stop()}return()=>{}},[e]),Object(c.c)("canvas",{ref:t,width:"800px",height:"200px",sx:{width:"100%",maxHeight:"200px",minHeight:0,flex:"1 0 70px",bg:"rgba(0,0,0,0.8)",borderRadius:"7px"}})}function Q(e){const t=m(),{audioStream:n,audioChoice:r}=h(),o=()=>e.previousStep(),a=()=>e.nextStep(),i=()=>a(),l=async()=>{t({type:"CHOOSE_AUDIO",payload:"microphone"});const e=window.localStorage.getItem("ocStudioLastAudioDevice");await U(t,e?{ideal:e}:null),await Object(d.i)(t)},s=()=>{n&&_(n,t),t({type:"CHOOSE_AUDIO",payload:"none"})},u=(()=>{switch(r){case"none":return Object(c.c)(J,{selectNoAudio:i,selectMicrophone:l,backToVideoSetup:o});case"microphone":return Object(c.c)(Z,{reselectSource:s,enterStudio:a});default:return"internal error :-("}})();return Object(c.c)($,null,u)}const J=({selectNoAudio:e,selectMicrophone:t,backToVideoSetup:n})=>{const{t:a}=Object(S.a)();return Object(c.c)(o.Fragment,null,Object(c.c)(j.b.h1,null,a("sources-audio-question")),Object(c.c)(r.e,{sx:{flexDirection:["column","row"],maxWidth:850,width:"100%",mx:"auto",mb:3,flex:"1 0 auto",maxHeight:["none","350px"],"& > :first-of-type":{mb:[3,0],mr:[0,3]}}},Object(c.c)(ee,{icon:x.n,label:a("sources-audio-microphone"),onClick:t}),Object(c.c)(ee,{icon:x.o,label:a("sources-audio-without-audio"),onClick:e})),Object(c.c)(M,{prev:{onClick:n}}))},Z=({reselectSource:e,enterStudio:t})=>{var n,a,i;const{t:l}=Object(S.a)(),s=m(),u=h(),{audioStream:b,audioAllowed:p,audioUnexpectedEnd:g}=u,O=null===b||void 0===b||null===(n=b.getAudioTracks())||void 0===n||null===(a=n[0])||void 0===a||null===(i=a.getSettings())||void 0===i?void 0:i.deviceId,f=Object(d.c)(u.mediaDevices,"audioinput");Object(o.useEffect)(()=>{O&&window.localStorage.setItem("ocStudioLastAudioDevice",O)});const y=({min:e,max:t})=>Object(c.c)("div",{sx:{flex:1,maxHeight:t,minHeight:e}});let w;return w=b?Object(c.c)(o.Fragment,null,Object(c.c)(Y,{stream:b}),Object(c.c)("div",{sx:{display:"flex",width:"80%",my:3,fontSize:"18px",minWidth:"285px"}},Object(c.c)("span",{sx:{mr:3,display:"flex",flexDirection:"column",alignItems:"center"}},l("sources-audio-device"),":"),Object(c.c)("select",{sx:{variant:"styles.select",flex:"1 0 0",minWidth:0},value:O,onChange:e=>(async e=>{b&&_(b,s),await U(s,{exact:e})})(e.target.value)},f.map((e,t)=>Object(c.c)("option",{key:t,value:e.deviceId},e.label||"unlabeled microphone"))))):!1===p?Object(c.c)(o.Fragment,null,Object(c.c)(v.a,{icon:x.k,size:"3x"}),Object(c.c)(y,{min:"16px",max:"48px"}),Object(c.c)(V,{isDanger:!0},Object(c.c)(r.f,{as:"h3",mb:2},l("source-audio-not-allowed-title")),Object(c.c)(r.j,{variant:"text"},l("source-audio-not-allowed-text")))):!0===g?Object(c.c)(o.Fragment,null,Object(c.c)(v.a,{icon:x.k,size:"3x"}),Object(c.c)(y,{min:"16px",max:"48px"}),Object(c.c)(V,{isDanger:!0},Object(c.c)(r.j,{variant:"text"},l("error-lost-audio-stream")))):Object(c.c)(r.i,{size:"75"}),Object(c.c)(o.Fragment,null,Object(c.c)(j.b.h1,null,l("sources-audio-microphone-selected")),Object(c.c)("div",{sx:{maxWidth:850,width:"100%",mx:"auto",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flex:"1 0 auto",maxHeight:"400px"}},w),Object(c.c)(M,{prev:{label:"sources-audio-reselect-audio",onClick:e},next:{onClick:t}}))},ee=({children:e,icon:t,label:n,onClick:r})=>Object(c.c)("button",{onClick:r,title:n,sx:{fontFamily:"inherit",color:"gray.0",backgroundColor:"gray.4",border:"2px solid black",borderRadius:"8px",flex:"0 1 50%",p:2,"&:hover":{boxShadow:e=>`0 0 10px ${e.colors.gray[2]}`,backgroundColor:"white"}}},Object(c.c)("div",{sx:{display:"block",textAlign:"center",mb:3}},Object(c.c)(v.a,{icon:t,size:"3x"})),Object(c.c)("div",{sx:{fontSize:4}},n),e);var te=n(533),ne=n(531),ce=n(168),re=n(534),oe=n(28),ae=n(27);const ie=({errors:e,register:t,label:n,name:r,required:o,validate:a,type:i="text",...l})=>{const{t:s}=Object(S.a)();return Object(c.c)("div",{sx:{"&:not(:last-child)":{mb:3}}},Object(c.c)("label",{sx:{color:"text",display:"block",fontSize:2,fontWeight:"bold"}},n,Object(c.c)("div",{sx:{display:"block",boxSizing:"border-box",clear:"both",fontSize:2,position:"relative",textAlign:"left"}},Object(c.c)("input",Object.assign({"aria-invalid":e[r]?"true":"false","aria-describedby":`${r}Error`,autoComplete:"off",name:r,ref:t({validate:a,...o?{required:s("forms-validation-error-required")}:{}}),sx:{variant:"styles.input"},type:i},l)),e[r]&&Object(c.c)("p",{id:`${r}Error`,sx:{color:"error",fontSize:1,fontWeight:"body",mt:1}},e[r].message))))};var le=({onDownload:e,recording:t,title:n,presenter:o})=>{const{t:a,i18n:i}=Object(S.a)(),{deviceType:l,mimeType:s,url:u,downloaded:b,media:p}=t,g=a("desktop"===l?"sources-display":"sources-user"),O=Object(d.j)({mimeType:s,flavor:g,title:n,presenter:o});if(!u)return null;const m=p.size,h=e=>{const t=e<10?1:0;return e.toLocaleString(i.language,{minimumFractionDigits:t,maximumFractionDigits:t})},j=m<1e3?`${m} B`:m<999500?`${h(m/1e3)} KB`:m<9995e5?`${h(m/1e6)} MB`:`${h(m/1e9)} GB`;return Object(c.c)("div",{sx:{display:"flex",flexDirection:"column",flex:"0 0 auto",mx:2,pb:"12px",alignItems:"center"}},Object(c.c)("div",{sx:{position:"relative",height:"150px",border:e=>`2px solid ${e.colors.gray[1]}`}},Object(c.c)("video",{muted:!0,src:u,onLoadedData:e=>e.target.currentTime=0,preload:"auto",sx:{maxWidth:"100%",height:"100%"}}),b&&Object(c.c)("div",{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",color:"primary",backgroundColor:"rgba(0, 0, 0, 0.4)"}},Object(c.c)(v.a,{icon:x.d,size:"4x"}))),Object(c.c)(r.b,{as:"a",title:a("save-creation-download-button"),sx:{width:"100%",maxWidth:"215px",margin:"auto",mt:"10px"},target:"_blank",download:O,href:u,rel:"noopener noreferrer",onClick:e},Object(c.c)(v.a,{icon:x.h}),a("save-creation-download-button")," ","(",j,")"))};let se=[];function de(e){const t=Object(ae.e)(),{t:n}=Object(S.a)(),a=Object(oe.n)(),{recordings:i,upload:l,title:s,presenter:d,start:u,end:b}=h(),p=m();function g(e){const t=Date.now();se.push({timestamp:t,progress:e});const n=Math.min(se.findIndex(e=>t-e.timestamp<5e3),Math.max(0,se.length-6));se.splice(0,n);let c=null;if(se.length>=4){const n=t-se[0].timestamp,r=(e-se[0].progress)/n*1e3,o=1-e;c=Math.max(0,Math.round(o/r))}l.secondsLeft===c&&l.currentProgress===e||p({type:"UPLOAD_PROGRESS_UPDATE",payload:{secondsLeft:c,currentProgress:e}})}async function O(){p({type:"UPLOAD_REQUEST"}),se.push({timestamp:Date.now(),progress:0});const e=await a.upload({recordings:i.filter(Boolean),title:s,presenter:d,start:u,end:b,uploadSettings:t.upload,onProgress:g});switch(se=[],e){case oe.l:p({type:"UPLOAD_SUCCESS"});break;case oe.j:p({type:"UPLOAD_ERROR",payload:n("save-creation-upload-network-error")});break;case oe.k:p({type:"UPLOAD_ERROR",payload:n("save-creation-upload-not-authorized")});break;case oe.m:p({type:"UPLOAD_ERROR",payload:n("save-creation-upload-invalid-response")});break;default:p({type:"UPLOAD_ERROR",payload:n("save-creation-upload-unknown-error")})}}Object(o.useEffect)(()=>{const e=setInterval(()=>{if("uploading"===l.state)if(se.length){const e=se[se.length-1];Date.now()-e.timestamp>3e3&&g(e.progress)}else g(0)},1e3);return()=>clearInterval(e)});const v=i.every(e=>e.downloaded),x=("uploaded"===l.state||v)&&"uploading"!==l.state,f="not_uploaded"!==l.state||v,y=(()=>{if("not_uploaded"===l.state&&(a.getState()===oe.i||a.getState()===oe.c))return Object(c.c)(ge,null);switch(l.state){case"uploading":return Object(c.c)(he,{currentProgress:l.currentProgress,secondsLeft:l.secondsLeft});case"uploaded":return Object(c.c)(je,null);default:return Object(c.c)(Oe,{uploadState:l,handleUpload:O})}})();return Object(c.c)(r.d,{sx:{display:"flex",flexDirection:"column",flex:"1 0 auto"}},Object(c.c)(j.b.h1,{sx:{textAlign:"center",fontSize:["26px","30px","32px"]}},n(x?"save-creation-title-done":"save-creation-title")),Object(c.c)("div",{sx:{display:"flex",flexDirection:["column","column","row"],"& > *":{flex:["0","0","1 0 50%"],p:[2,2,"0 32px"],"&:last-child":{borderLeft:["none","none",e=>`1px solid ${e.colors.gray[3]}`]}}}},Object(c.c)("div",null,Object(c.c)(j.b.h2,{sx:{pb:1,borderBottom:e=>`1px solid ${e.colors.gray[2]}`}},n("save-creation-subsection-title-upload")),Object(c.c)("div",{sx:{margin:"auto"}},y)),Object(c.c)("div",null,Object(c.c)(j.b.h2,{sx:{pb:1,borderBottom:e=>`1px solid ${e.colors.gray[2]}`}},n("save-creation-subsection-title-download")),Object(c.c)(pe,Object.assign({dispatch:p},{title:s,presenter:d})))),Object(c.c)("div",{sx:{flex:"1 0 32px"}}),Object(c.c)(M,{next:null,prev:f?null:{onClick:function(){e.previousStep()},disabled:!1}},x&&Object(c.c)(ue,{goToFirstStep:e.firstStep})))}const ue=({goToFirstStep:e})=>{var t;const{t:n}=Object(S.a)(),o=m(),a=Object(ae.e)();let i;if(null===(t=a.return)||void 0===t?void 0:t.target)if(be(a)){var l;const e=(null===(l=a.return)||void 0===l?void 0:l.label)?n("save-creation-return-to",{label:a.return.label}):n("save-creation-return-to-no-label");i=Object(c.c)(r.b,{as:"a",title:e,href:a.return.target,sx:{whiteSpace:"nowrap",fontWeight:400,mb:2}},Object(c.c)(v.a,{icon:x.x}),e)}else console.warn("the given 'return.target' is not allowed (check 'return.allowedDomains' in 'settings.toml')");return Object(c.c)("div",{sx:{display:"flex",flexDirection:"column"}},i,Object(c.c)(r.b,{sx:{whiteSpace:"nowrap"},title:n("save-creation-new-recording"),onClick:()=>{window.confirm(n("save-creation-new-recording-warning"))&&(o({type:"RESET"}),e())}},Object(c.c)(v.a,{icon:x.u}),n("save-creation-new-recording")))},be=e=>{var t;let n;try{n=new URL(e.return.target,window.location)}catch(c){return!1}return[window.location.hostname,...(null===(t=e.return)||void 0===t?void 0:t.allowedDomains)||[]].some(e=>n.hostname===e)&&("https:"===n.protocol||"http:"===n.protocol)},pe=({presenter:e,title:t})=>{const{t:n}=Object(S.a)(),a=m(),{recordings:i,start:l,end:s}=h();return Object(c.c)(o.Fragment,null,(null!==l||null!==s)&&Object(c.c)(V,{sx:{display:"flex",flexDirection:"column",alignItems:"center"}},Object(c.c)(v.a,{icon:x.k,sx:{fontSize:"26px",mb:3}}),Object(c.c)("p",{sx:{m:0}},n("save-creation-download-cut-warning"))),Object(c.c)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:["center","center","start"],flexWrap:"wrap"}},0===i.length?Object(c.c)(r.i,null):i.map((n,r)=>Object(c.c)(le,{key:r,recording:n,presenter:e,title:t,onDownload:()=>a({type:"MARK_DOWNLOADED",payload:r})}))))},ge=()=>{const e=Object(l.h)();return Object(c.c)(V,{key:"opencast-connection",isDanger:!0},Object(c.c)(ne.a,{i18nKey:"warning-missing-connection-settings"},"Warning.",Object(c.c)(i.b,{to:{pathname:"/settings",search:e.search},sx:{variant:"styles.a",color:"#ff2"}},"settings")))},Oe=({uploadState:e,handleUpload:t})=>{const{titleField:n=ae.b,presenterField:a=ae.b}=Object(ae.e)().upload||{},{t:i}=Object(S.a)(),l=Object(oe.n)(),s=m(),{recordings:d,title:u,presenter:b}=h(),p=b||window.localStorage.getItem("ocStudioLastPresenter")||"",{errors:g,handleSubmit:O,register:j}=Object(ce.a)();function f(e){const t=e.target;s({type:{title:"UPDATE_TITLE",presenter:"UPDATE_PRESENTER"}[t.name],payload:t.value}),"presenter"===t.name&&window.localStorage.setItem("ocStudioLastPresenter",t.value)}Object(o.useEffect)(()=>{p!==b&&s({type:"UPDATE_PRESENTER",payload:p})});const y=l.prettyServerUrl()?Object(c.c)(ne.a,{i18nKey:"save-creation-upload-to"},"Upload to ",Object(c.c)("code",{sx:{backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"5px",padding:"1px 3px"}},{server:l.prettyServerUrl()})):i("save-creation-button-upload");return Object(c.c)(o.Fragment,null,Object(c.c)(me,null),Object(c.c)("form",null,n!==ae.a&&Object(c.c)(ie,Object.assign({name:"title",label:i("save-creation-label-title"),required:n===ae.b,onChange:f,autoComplete:"off",defaultValue:u},{errors:g,register:j})),a!==ae.a&&Object(c.c)(ie,Object.assign({name:"presenter",label:i("save-creation-label-presenter"),required:a===ae.b,onChange:f,autoComplete:"off",defaultValue:p},{errors:g,register:j})),Object(c.c)(r.b,{title:i("save-creation-button-upload"),disabled:0===d.length,onClick:O(t)},Object(c.c)(v.a,{icon:x.z}),y)),Object(c.c)(r.a,{sx:{mt:2}},"error"===e.state&&Object(c.c)(V,{isDanger:!0},e.error)))},me=()=>{const e=Object(l.h)(),t=Object(oe.n)(),{t:n}=Object(S.a)(),a=Object(re.a)(),[s,d]=Object(o.useState)(!1);if(Object(o.useEffect)(()=>{if(!t.isReadyToUpload()&&!s&&a){const e=setTimeout(async()=>{d(!0),await t.refreshConnection(),d(!1)},5e3);return()=>clearTimeout(e)}}),t.isReadyToUpload())return null;let u,b;switch(t.getState()){case oe.g:u=n("save-creation-warn-unreachable"),b=n("save-creation-warn-once-reestablished");break;case oe.d:if(t.isLoginProvided()){const e=document.referrer;u=Object(c.c)(ne.a,{i18nKey:"save-creation-warn-session-expired"},"Foo",e&&!e.includes(window.origin||"")?Object(c.c)(j.b.a,{href:e,target:"_blank",sx:{color:"#ff2"}},"bar"):Object(c.c)(o.Fragment,null,"bar"),"baz"),n("save-creation-warn-session-expired"),b=n("save-creation-warn-once-refreshed")}else u=Object(c.c)(ne.a,{i18nKey:"save-creation-warn-login-failed"},"Failed.",Object(c.c)(i.b,{to:{pathname:"/settings",search:e.search},sx:{variant:"styles.a",color:"#ff2"}},"settings")),b=n("save-creation-warn-once-logged-in");break;case oe.h:case oe.e:u=n("save-creation-warn-server-problem")+" "+n("save-creation-warn-download-hint");break;default:u="Internal error :-("}return Object(c.c)(V,{isDanger:!0},Object(c.c)("div",{sx:{textAlign:"center",fontSize:"40px",lineHeight:1.3}},s?Object(c.c)(r.i,{size:"40"}):Object(c.c)(v.a,{icon:x.k})),Object(c.c)("p",{sx:{mb:0}},u),b&&Object(c.c)("p",{sx:{mb:0}},b,b&&" ",n("save-creation-warn-download-hint")))},he=({currentProgress:e,secondsLeft:t})=>{const{t:n,i18n:a}=Object(S.a)(),i=Math.min(100,100*e).toLocaleString(a.language,{minimumFractionDigits:1,maximumFractionDigits:1});let l;return l=null===t?null:t<4?n("upload-time-a-few-seconds"):t<45?`${t} ${n("upload-time-seconds")}`:t<90?n("upload-time-a-minute"):t<2700?`${Math.round(t/60)} ${n("upload-time-minutes")}`:t<5400?n("upload-time-an-hour"):t<86400?`${Math.round(t/3600)} ${n("upload-time-hours")}`:null,Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{display:"flex",mb:2}},Object(c.c)(r.j,{variant:"text"},i,"%"),Object(c.c)("div",{sx:{flex:1}}),Object(c.c)(r.j,{variant:"text"},l&&Object(c.c)(ne.a,{i18nKey:"upload-time-left"},{time:l}," left"))),Object(c.c)(te.f,{max:1,value:e,variant:"styles.progress"},i),Object(c.c)(r.j,{variant:"text",sx:{textAlign:"center",mt:2}},n("upload-notification")))},je=()=>{const{t:e}=Object(S.a)();return Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"130px",color:"primary"}},Object(c.c)(v.a,{icon:x.d,size:"4x"})),Object(c.c)(r.j,{variant:"text",sx:{textAlign:"center"}},e("message-upload-complete")),Object(c.c)(r.j,{sx:{textAlign:"center",mt:2}},e("message-upload-complete-explanation")))};var ve=n(272);n(273);let xe=0,fe=0,ye="";const we=(e,t,n)=>{xe=e,fe=t,ye=n,console.log("Frame type is : "+ye)},Se=(e,t=!1)=>{const n=e.deviceId&&{deviceId:{[t?"exact":"ideal"]:e.deviceId}},c=Ce(e.aspectRatio),r=c&&{aspectRatio:{ideal:c}},o=ke(e.quality);return{...n,...r,...o&&{height:{ideal:o}}}},Ee=["4:3","16:9"],Ce=e=>({"4:3":4/3,"16:9":16/9}[e]||null),ke=e=>/^[0-9]+p$/.test(e)?parseInt(e):null,De=()=>({deviceId:window.localStorage.getItem("ocStudioLastVideoDevice"),aspectRatio:window.localStorage.getItem("ocStudioCameraAspectRatio")||"auto",quality:window.localStorage.getItem("ocStudioCameraQuality")||"auto"}),Re=()=>({quality:window.localStorage.getItem("ocStudioDisplayQuality")||"auto"}),Ae=({isDesktop:e,stream:t})=>{const n=m(),r=Object(ae.e)(),[a,i]=Object(o.useState)(0),{ref:l}=N()({onResize:()=>{var e;return i((null===(e=l.current)||void 0===e?void 0:e.offsetHeight)+4)}}),s=e?Re():De(),d=c=>{const o={...s,...c},a=Se(o,!0);e?(window.localStorage.setItem("ocStudioDisplayQuality",o.quality),console.log("Is Desktop : "+e),L(t,n),P(n,r,a,xe)):(window.localStorage.setItem("ocStudioLastVideoDevice",o.deviceId),window.localStorage.setItem("ocStudioCameraAspectRatio",o.aspectRatio),window.localStorage.setItem("ocStudioCameraQuality",o.quality),H(t,n),I(n,r,a,fe))};Object(o.useEffect)(()=>{const n=He(t);!e&&n&&window.localStorage.setItem("ocStudioLastVideoDevice",n)});const[u,b]=Object(o.useState)(!1);return Object(c.c)(o.Fragment,null,Object(c.c)("div",{sx:{position:"absolute",top:u?"8px":"-30px",left:0,right:0,textAlign:"center",transition:"top 0.2s"}},Object(c.c)("span",{sx:{color:"gray.1",backgroundColor:"white",borderRadius:"10px",p:1,fontSize:"18px"}},Object(c.c)(Te,{stream:t}))),Object(c.c)("div",{sx:{position:"absolute",left:0,right:0,bottom:0,height:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-end"}},Object(c.c)("div",{sx:{textAlign:"right"}},Object(c.c)("div",{onClick:()=>b(e=>!e),sx:{display:"inline-block",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",p:"6px",m:2,fontSize:"30px",lineHeight:"1em",borderRadius:"10px",cursor:"pointer","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&:hover > svg":{transform:u?"none":"rotate(45deg)"}}},Object(c.c)(v.a,{icon:u?x.w:x.g,fixedWidth:!0,sx:{transition:u?"none":"transform 0.2s",width:"1em !important"}}))),Object(c.c)("div",{sx:{height:u?a||"auto":0,flex:"0 1 auto",transition:"height 0.2s",overflow:"hidden",backgroundColor:"white",fontSize:"18px",boxShadow:u?"0 0 15px rgba(0, 0, 0, 0.3)":"none"}},Object(c.c)("div",{sx:{border:e=>`1px solid ${e.colors.gray[0]}`,height:"100%",overflow:"auto"}},Object(c.c)("div",{ref:l,sx:{p:1,pb:"2px"}},Object(c.c)("div",{sx:{display:"grid",width:"100%",gridTemplateColumns:"auto 1fr",gridGap:"6px 12px",p:1}},!e&&Object(c.c)(_e,{updatePrefs:d,prefs:s}),Object(c.c)(Ie,{isDesktop:e,updatePrefs:d,prefs:s,stream:t,settings:r})),Object(c.c)("div",{sx:{backgroundColor:"#ebebeb",m:2,py:1,px:2,fontSize:"16px",lineHeight:"20px",border:e=>`1px solid ${e.colors.gray[2]}`}},Object(c.c)(ne.a,{i18nKey:"sources-video-preferences-note"},Object(c.c)("strong",null,"Note:")," Explanation.")))))))},Te=({stream:e})=>{var t,n;const c=null===e||void 0===e||null===(t=e.getVideoTracks())||void 0===t||null===(n=t[0])||void 0===n?void 0:n.getSettings(),r=c&&c.width&&c.height?`${c.width}\xd7${c.height}`:"";if("SINGLE"===ye){const e=c&&xe?`${xe} fps`:"";return c?[r,e].join(", "):"..."}{const e=c&&c.frameRate?`${c.frameRate} fps`:"";return c?[r,e].join(", "):"..."}},Ue=({children:e})=>Object(c.c)("div",{sx:{gridColumn:"0 1",display:"flex",flexDirection:"column",justifyContent:"center",hyphens:"auto"}},e),Pe=({children:e})=>Object(c.c)("div",{sx:{gridColumn:"1 2",overflowX:"auto",lineHeight:"30px"}},e),Ie=({isDesktop:e,updatePrefs:t,prefs:n,stream:r,settings:a})=>{var i,l;const{t:s}=Object(S.a)(),u=e=>t({quality:e}),b=(e=>{let t=[360,480,720,1080,1440,2160].filter(t=>!e||t<=e);return!e||0!==t.length&&t[t.length-1]===e||t.push(e),t.map(e=>`${e}p`)})(e?null===(i=a.display)||void 0===i?void 0:i.maxHeight:null===(l=a.camera)||void 0===l?void 0:l.maxHeight),[p,g]=Object(o.useState)([10,20,30]);console.log("Stream is from Universal settings : "+r);const O=e?"desktop":"user",[,m]=Object(d.b)(r);let h;if(m&&b.includes(n.quality)){const e=parseInt(n.quality);h=e===m?"ok":"warn"}console.log("KInd is : "+O);return Object(c.c)(o.Fragment,null,Object(c.c)(Ue,null,s("sources-video-quality"),"*:"),Object(c.c)(Pe,null,Object(c.c)(Le,{id:`quality-auto-${O}`,value:"auto",name:`quality-${O}`,label:s("sources-video-quality-auto"),onChange:u,checked:b.every(e=>n.quality!==e)}),b.map(e=>Object(c.c)(o.Fragment,{key:`${e}-${O}`},Object(c.c)("wbr",null),Object(c.c)(Le,{id:`quality-${e}-${O}`,value:e,name:`quality-${O}`,onChange:u,checked:n.quality===e,state:h})))),Object(c.c)("form",{method:"POST"},Object(c.c)(Pe,null)))},_e=({updatePrefs:e,prefs:t})=>{const{t:n}=Object(S.a)(),r=h(),a=He(r.userStream),i=Object(d.c)(r.mediaDevices,"videoinput"),[l,s]=Object(d.b)(r.userStream);let u;if(l&&s&&Ee.includes(t.aspectRatio)){const e=l/s,n=Ce(t.aspectRatio);u=.97*n<e&&e<n/.97?"ok":"warn"}const b=t=>e({aspectRatio:t});return Object(c.c)(o.Fragment,null,Object(c.c)(Ue,null,n("sources-video-device"),":"),Object(c.c)(Pe,null,Object(c.c)("select",{sx:{variant:"styles.select"},value:a,onChange:t=>{return n=t.target.value,e({deviceId:n});var n}},i.map((e,t)=>Object(c.c)("option",{key:t,value:e.deviceId},e.label)))),Object(c.c)(Ue,null,n("sources-video-aspect-ratio"),"*:"),Object(c.c)(Pe,null,Object(c.c)(Le,{id:"ar-auto",value:"auto",name:"aspectRatio",label:n("sources-video-aspect-ratio-auto"),onChange:b,checked:Ee.every(e=>t.aspectRatio!==e)}),Ee.map(e=>Object(c.c)(o.Fragment,{key:`ar-${e}`},Object(c.c)("wbr",null),Object(c.c)(Le,{id:`ar-${e}`,value:e,name:"aspectRatio",onChange:b,checked:t.aspectRatio===e,state:u})))))},Le=({id:e,value:t,checked:n,name:r,onChange:a,label:i,state:l})=>Object(c.c)(o.Fragment,null,Object(c.c)("input",Object.assign({type:"radio",onChange:e=>a(e.target.value)},{id:e,value:t,checked:n,name:r},{sx:{display:"none","&+label":{border:e=>`2px solid ${e.colors.gray[0]}`,p:"1px 4px",borderRadius:"6px",mx:1},"&:checked+label":{bg:"gray.0",color:l?{warn:"#ffe300",ok:"#51d18f"}[l]:"white",fontWeight:"bold"}}})),Object(c.c)("label",{htmlFor:e},i||t)),He=e=>{var t,n,c;return null===e||void 0===e||null===(t=e.getVideoTracks())||void 0===t||null===(n=t[0])||void 0===n||null===(c=n.getSettings())||void 0===c?void 0:c.deviceId},ze=({warnings:e,inputs:t})=>{let n;switch(t.length){case 1:n=[{body:Object(c.c)(Ne,{input:t[0]}),dimensions:()=>Object(d.b)(t[0].stream)}];break;case 2:n=[{body:Object(c.c)(Ne,{input:t[0]}),dimensions:()=>Object(d.b)(t[0].stream)},{body:Object(c.c)(Ne,{input:t[1]}),dimensions:()=>Object(d.b)(t[1].stream)}];break;default:return Object(c.c)("p",null,"Something went very wrong")}return Object(c.c)(o.Fragment,null,e,Object(c.c)(q,{minWidth:300,gap:20},n))},Ne=({input:e,text:t})=>Object(c.c)(r.c,{sx:{height:"100%",overflow:"hidden"}},Object(c.c)(We,{input:e}),Object(c.c)(Ae,{isDesktop:e.isDesktop,stream:e.stream})),We=({input:e})=>{const{allowed:t,stream:n,unexpectedEnd:a}=e,i=G(),l=Object(o.useRef)();if(Object(o.useEffect)(()=>{const e=l.current;return e&&(e.srcObject||(e.srcObject=n),e.addEventListener("resize",i)),()=>{e&&e.removeEventListener("resize",i)}},[n,i]),!n){let e;return e=!1===t||a?Object(c.c)(v.a,{icon:x.k,size:"3x"}):Object(c.c)(r.i,{size:"75"}),Object(c.c)("div",{sx:{width:"100%",height:"100%",minHeight:"120px",display:"flex",justifyContent:"center",alignItems:"center"}},e)}return Object(c.c)("video",{ref:l,autoPlay:!0,muted:!0,sx:{minHeight:0,display:"block",width:"100%",height:"100%"}})};n(274);function Fe({nextStep:e,userHasWebcam:t}){const{t:n}=Object(S.a)(),o=m(),a=h(),{displayStream:i,userStream:l,videoChoice:s}=a,d=e=>o({type:"CHOOSE_VIDEO",payload:e}),u="none"===s||"both"===s?!i||!l:!(i||l),b=!1===a.userAllowed&&Object(c.c)(V,{key:"user-stream-warning",isDanger:!0},Object(c.c)(r.f,{as:"h3",mb:2},n("source-user-not-allowed-title")),Object(c.c)(r.j,null,n("source-user-not-allowed-text"))),p=!1===a.displayAllowed&&Object(c.c)(V,{key:"display-stream-warning",isDanger:!0},Object(c.c)(r.f,{as:"h3",mb:2},n("source-display-not-allowed-title")),Object(c.c)(r.j,null,n("source-display-not-allowed-text"))),g=(a.userUnexpectedEnd||a.displayUnexpectedEnd)&&Object(c.c)(V,{key:"unexpexted-stream-end-warning",isDanger:!0},Object(c.c)(r.j,null,n("error-lost-video-stream"))),O={isDesktop:!1,stream:l,allowed:a.userAllowed,unexpectedEnd:a.userUnexpectedEnd},v={isDesktop:!0,stream:i,allowed:a.displayAllowed,unexpectedEnd:a.displayUnexpectedEnd};let x,f,y;switch(s){case"none":const e=Se(De()),r=Se(Re());f=n("sources-video-question"),x=!0,y=Object(c.c)($e,{setActiveSource:d,userConstraints:e,displayConstraints:r,userHasWebcam:t});break;case"user":f=n("sources-video-user-selected"),x=!l&&!1!==a.userAllowed,y=Object(c.c)(ze,{warnings:[b,g],inputs:[O]});break;case"display":f=n("sources-video-display-selected"),x=!i&&!1!==a.displayAllowed,y=Object(c.c)(ze,{warnings:[p,g],inputs:[v]});break;case"both":f=n("sources-video-display-and-user-selected"),x=!l&&!1!==a.userAllowed||!i&&!1!==a.displayAllowed,y=Object(c.c)(ze,{warnings:[p,b,g],inputs:[v,O]});break;default:return console.error("bug: active source has an unexpected value"),Object(c.c)("p",null,"Something went very wrong (internal error) :-(")}const w=x&&!a.userUnexpectedEnd&&!a.displayUnexpectedEnd;return Object(c.c)($,null,Object(c.c)(j.b.h1,null,f),y,"none"!==s&&Object(c.c)("div",{sx:{mb:3}}),"none"!==s&&Object(c.c)(M,{next:x?null:{onClick:()=>e(),disabled:u},prev:w?null:{onClick:()=>{d("none"),H(l,o),L(i,o)},disabled:!1,label:"sources-video-reselect-source"}}))}const $e=({setActiveSource:e,userConstraints:t,displayConstraints:n,userHasWebcam:i})=>{const[l,s]=Object(o.useState)(""),[u,b]=Object(o.useState)(0),[p,g]=Object(o.useState)(0),[O,v]=Object(o.useState)(""),x=e=>{s(e.target.value),console.log("Value is : "+e.target.value)},f=e=>{b(e.target.value)},y=e=>{g(e.target.value)},w=e=>{v(e.target.value)},{t:E}=Object(S.a)(),C=Object(ae.e)(),k=m(),D=h(),{displaySupported:R,userSupported:A}=D,T=async()=>{e("user"),await I(k,C,t,p),await Object(d.i)(k)},U=async()=>{e("display"),await P(k,C,n,u)},_=async()=>{"SINGLE"===l?we(O,O,l):"DUAL"===l&&we(u,p,l),e("both"),await I(k,C,t,p),await Promise.all([Object(d.i)(k),P(k,C,n,u)])};return R||A?Object(c.c)(a.a.Fragment,null,Object(c.c)(Be,null),Object(c.c)(r.e,{sx:{flexDirection:["column","row"],maxWidth:[270,850],width:"100%",mx:["auto","none"],mb:3,flex:"4 1 auto",maxHeight:["none","270px"],justifyContent:"center","& > :not(:last-of-type)":{mb:[3,0],mr:[0,3]}}},Object(c.c)(ve.a,{trigger:(R||!Object(d.g)())&&Object(c.c)(Me,{label:E("sources-scenario-display"),img:"https://img.icons8.com/fluent-systems-filled/96/4a90e2/monitor.png",backgroundColor:"",disabledText:!R&&E("sources-video-display-not-supported")}),modal:!0,nested:!0},e=>Object(c.c)("div",{sx:{p:20,borderRadius:10}},Object(c.c)("div",null,Object(c.c)(j.b.h1,{sx:{textAlign:"center",mb:25}},"Configure your output")),Object(c.c)(te.g,{sx:{mt:10},onChange:f},Object(c.c)("option",{value:""},"Select FPS"),Object(c.c)("option",{value:"10"},"10"),Object(c.c)("option",{value:"20"},"20"),Object(c.c)("option",{value:"30"},"30")),Object(c.c)("div",{sx:{mt:20}},Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",m:0,px:3,py:2,border:0,borderRadius:4,variant:"buttons.primary"},onClick:U},"NEXT"),Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",ml:430,px:3,py:2,border:0,borderRadius:4,variant:"buttons.danger"},onClick:()=>{console.log("modal closed "),e()}},"CLOSE")))),Object(c.c)(ve.a,{trigger:(R||!Object(d.g)())&&A&&Object(c.c)(Me,{label:E("sources-scenario-display-and-user"),img:"https://img.icons8.com/pastel-glyph/64/4a90e2/cinema-screen.png",onClick:_,disabledText:R?!i&&E("sources-video-no-cam-detected"):E("sources-video-display-not-supported")}),modal:!0,nested:!0},e=>Object(c.c)("div",{sx:{p:20,borderRadius:10}},Object(c.c)("div",null,Object(c.c)(j.b.h1,{sx:{textAlign:"center",mb:25}},"Configure your output")),Object(c.c)(te.g,{onChange:x},Object(c.c)("option",{value:""},"Select Diliverable Type"),Object(c.c)("option",{value:"SINGLE"},"Match Same FPS"),Object(c.c)("option",{value:"DUAL"},"Select Different FPS s")),"SINGLE"===l&&Object(c.c)(te.g,{sx:{mt:10},onChange:w},Object(c.c)("option",{value:""},"Select FPS"),Object(c.c)("option",{value:"10"},"10"),Object(c.c)("option",{value:"20"},"20"),Object(c.c)("option",{value:"30"},"30")),"DUAL"===l&&Object(c.c)("div",null,Object(c.c)(te.g,{sx:{mt:10},onChange:f},Object(c.c)("option",{value:""},"Select FPS for PC Screen"),Object(c.c)("option",{value:"10"},"10"),Object(c.c)("option",{value:"20"},"20"),Object(c.c)("option",{value:"30"},"30")),Object(c.c)(te.g,{sx:{mt:10},onChange:y},Object(c.c)("option",{value:""},"Select FPS for Web Cam"),Object(c.c)("option",{value:"10"},"10"),Object(c.c)("option",{value:"20"},"20"),Object(c.c)("option",{value:"30"},"30"))),Object(c.c)("div",{sx:{mt:20}},Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",m:0,px:3,py:2,border:0,borderRadius:4,variant:"buttons.primary"},onClick:_},"NEXT"),Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",ml:430,px:3,py:2,border:0,borderRadius:4,variant:"buttons.danger"},onClick:()=>{console.log("modal closed "),e()}},"CLOSE")))),Object(c.c)(ve.a,{trigger:A&&Object(c.c)(Me,{label:E("sources-scenario-user"),img:"https://img.icons8.com/metro/52/4a90e2/camera.png",onClick:T,disabledText:!i&&E("sources-video-no-cam-detected")}),modal:!0,nested:!0},e=>Object(c.c)("div",{sx:{p:20,borderRadius:10}},Object(c.c)("div",null,Object(c.c)(j.b.h1,{sx:{textAlign:"center",mb:25}},"Configure your output")),Object(c.c)(te.g,{sx:{mt:10},onChange:y},Object(c.c)("option",{value:""},"Select FPS"),Object(c.c)("option",{value:"10"},"10"),Object(c.c)("option",{value:"20"},"20"),Object(c.c)("option",{value:"30"},"30")),Object(c.c)("div",{sx:{mt:20}},Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",m:0,px:3,py:2,border:0,borderRadius:4,variant:"buttons.primary"},onClick:T},"NEXT"),Object(c.c)("button",{sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",ml:430,px:3,py:2,border:0,borderRadius:4,variant:"buttons.danger"},onClick:()=>{console.log("modal closed "),e()}},"CLOSE"))))),Object(c.c)(Be,null)):Object(c.c)(V,{isDanger:!0},E("sources-video-none-available"))},Me=({img:e,label:t,onClick:n,disabledText:r=!1})=>{const o=!1!==r;return Object(c.c)("button",{onClick:n,disabled:o,title:t,sx:{fontFamily:"inherit",color:o?"gray.2":"gray.0",border:e=>`3px solid ${o?e.colors.blue[2]:"#19BCDC"}`,backgroundColor:"gray.4",borderRadius:"8px",flex:["1 1 auto","0 1 100%"],minWidth:"150px",maxWidth:"180px",minHeight:"120px",maxHeight:"160px",p:2,"&:hover":o?{}:{boxShadow:e=>`0 0 10px ${e.colors.gray[2]}`,backgroundColor:"white"}}},Object(c.c)("div",{sx:{display:"block",textAlign:"center",mb:3}},Object(c.c)("img",{src:e,style:{minWidth:"80px",maxWidth:"120px",minHeight:"80px",maxHeight:"120px"}})),Object(c.c)("div",{sx:{fontSize:2,fontWeight:"bold"}},t),Object(c.c)("div",{sx:{fontSize:2,mt:1}},r))},Be=e=>Object(c.c)("div",Object.assign({sx:{flex:"1 0 0"}},e));function Ge({recordingState:e}){const{t:t}=Object(S.a)(),{displayStream:n,userStream:r,displayUnexpectedEnd:o,userUnexpectedEnd:a}=h(),i=e===ht;let l=[];return(n||o)&&l.push({body:Object(c.c)(qe,{title:t("share-desktop"),stream:n,paused:i}),dimensions:()=>Object(d.b)(n)}),(r||a)&&l.push({body:Object(c.c)(qe,{title:t("share-camera"),stream:r,paused:i}),dimensions:()=>Object(d.b)(r)}),Object(c.c)(q,{gap:20},l)}function qe({title:e,stream:t,paused:n}){const r=G(),a=Object(o.useRef)();return Object(o.useEffect)(()=>{const e=a.current;if(e&&t)return e.srcObject||(e.srcObject=t),e.addEventListener("resize",r),n?e.pause():e.play(),()=>e.removeEventListener("resize",r)}),t?Object(c.c)("div",{sx:{position:"relative",backgroundColor:"gray.3",boxShadow:"0 2px 2px rgba(0, 0, 0, 0.35)",overflow:"hidden",height:"100%",cursor:t?"initial":"pointer"}},n&&Object(c.c)("div",{sx:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.5)"}},Object(c.c)(v.a,{icon:x.p,sx:{fontSize:"140px",maxWidth:"40%",maxHeight:"40%",position:"absolute",top:0,left:0,bottom:0,right:0,margin:"auto",animation:"3s ease-in-out infinite none pulse"}})),Object(c.c)("video",{ref:a,autoPlay:!0,muted:!0,sx:{outline:"none",width:"100%",height:"100%",background:"transparent"}})):Object(c.c)("div",{sx:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}},Object(c.c)(v.a,{icon:x.k,size:"3x"}))}var Ve=n(1),Ke=n(12);class Xe{constructor(e,t,n={}){let c;Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,Qe,{writable:!0,value:void 0}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Ze,{writable:!0,value:()=>{Object(Ve.a)(this,Qe)[Qe]=[]}}),Object.defineProperty(this,et,{writable:!0,value:e=>{e.data.size>0?Object(Ve.a)(this,Qe)[Qe].push(e.data):console.log("Recording data has size 0!",e)}}),Object.defineProperty(this,tt,{writable:!0,value:e=>{var t,n;const c=(null===(t=Object(Ve.a)(this,Qe)[Qe][0])||void 0===t?void 0:t.type)||Object(Ve.a)(this,Ye)[Ye].mimeType,r=new Blob(Object(Ve.a)(this,Qe)[Qe],{type:c}),o=URL.createObjectURL(r);Object(Ve.a)(this,Ze)[Ze](),null===(n=this.onStop)||void 0===n||n.call(this,{url:o,media:r,mimeType:c,dimensions:Object(Ve.a)(this,Je)[Je]})}}),"isTypeSupported"in MediaRecorder?(c=((null===t||void 0===t?void 0:t.mimes)||[]).find(e=>MediaRecorder.isTypeSupported(e)),c?console.debug("using first supported MIME type from settings: ",c):(null===t||void 0===t?void 0:t.mimes)&&console.debug("None of the MIME types specified in settings are supported by this `MediaRecorder`")):(null===t||void 0===t?void 0:t.mimes)&&console.debug("MIME types were specified, but `MediaRecorder.isTypeSupported` is not supported by your browser"),Object(Ve.a)(this,Ze)[Ze](),Object(Ve.a)(this,Je)[Je]=Object(d.b)(e);const r=null===t||void 0===t?void 0:t.videoBitrate;this.onStop=n.onStop,Object(Ve.a)(this,Ye)[Ye]=new MediaRecorder(e,{mimeType:c,videoBitsPerSecond:r}),Object(Ve.a)(this,Ye)[Ye].ondataavailable=Object(Ve.a)(this,et)[et],Object(Ve.a)(this,Ye)[Ye].onstop=Object(Ve.a)(this,tt)[tt]}start(){Object(Ve.a)(this,Ye)[Ye].start()}pause(){Object(Ve.a)(this,Ye)[Ye].pause()}resume(){Object(Ve.a)(this,Ye)[Ye].resume()}stop(){Object(Ve.a)(this,Ye)[Ye].stop()}}var Ye=Object(Ke.a)("recorder"),Qe=Object(Ke.a)("data"),Je=Object(Ke.a)("dimensions"),Ze=Object(Ke.a)("reset"),et=Object(Ke.a)("onDataAvailable"),tt=Object(Ke.a)("onStop");const nt=({large:e,...t})=>Object(c.c)("button",Object.assign({sx:{backgroundColor:"transparent",border:"none",position:"relative",overflow:"hidden",my:0,mx:e?"15px":0,padding:0,fontSize:e?"5rem":"3.5rem",lineHeight:e?"5rem":"3.5rem",svg:{margin:0,padding:0,outline:"none"}}},t)),ct=e=>Object(c.c)(nt,{onClick:e.onClick,title:e.title},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(v.a,{icon:x.q}))),rt=e=>Object(c.c)(nt,{onClick:e.onClick,title:e.title,large:e.large?1:0,disabled:e.disabled||e.countdown,sx:{color:"#bd181c","svg + svg":{color:"#e22319"},":disabled":{color:"#aaa"},":disabled svg + svg":{color:"#bbb"}}},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(v.a,{icon:e.countdown?x.f:x.e,spin:e.countdown}),Object(c.c)(v.a,{icon:x.e,transform:"shrink-6"}))),ot=e=>Object(c.c)(nt,{onClick:e.onClick,title:e.title},Object(c.c)("span",{className:"fa-layers"},Object(c.c)(v.a,{icon:x.t}))),at=e=>Object(c.c)(nt,{onClick:e.onClick,title:e.title,large:!!e.large,sx:{color:"#bd181c"}},Object(c.c)(v.a,{icon:x.v}));class it extends o.Component{constructor(e){super(e),Object.defineProperty(this,lt,{writable:!0,value:null}),Object.defineProperty(this,st,{writable:!0,value:null}),Object.defineProperty(this,dt,{writable:!0,value:!1}),this.state={milliseconds:0},Object(Ve.a)(this,lt)[lt]=new Date,Object(Ve.a)(this,st)[st]=setInterval(()=>this.tick(),100)}componentDidMount(){Object(Ve.a)(this,dt)[dt]=!0}componentWillUnmount(){this.stopTimer(),Object(Ve.a)(this,dt)[dt]=!1}resumeTimer(){this.timerId||(Object(Ve.a)(this,st)[st]=setInterval(()=>this.tick(),100),Object(Ve.a)(this,lt)[lt]=new Date)}stopTimer(){clearInterval(Object(Ve.a)(this,st)[st]),Object(Ve.a)(this,st)[st]=null}componentDidUpdate(e){this.props.isPaused!==e.isPaused&&(this.props.isPaused?this.stopTimer():this.resumeTimer())}tick(){if(Object(Ve.a)(this,dt)[dt]){const e=new Date,t=e-Object(Ve.a)(this,lt)[lt];Object(Ve.a)(this,lt)[lt]=e,this.setState(e=>({milliseconds:e.milliseconds+t}))}}render(){const e=this.state.milliseconds;let t=[e/36e5>>0,(e/6e4>>0)%60,(e/1e3>>0)%60];0===t[0]&&(t=t.slice(1));const n=t.map(e=>(e<10?"0":"")+e).join(":");return Object(c.c)("span",{sx:{fontSize:3}},n)}}var lt=Object(Ke.a)("last"),st=Object(Ke.a)("timerID"),dt=Object(Ke.a)("isMounted"),ut=it;function bt(e,t){return({media:n,url:c,mimeType:r,dimensions:o})=>{e({type:"ADD_RECORDING",payload:{deviceType:t,media:n,url:c,mimeType:r,dimensions:o}})}}function pt(e,t){return(null===e||void 0===e?void 0:e.getAudioTracks().length)?new MediaStream([...t.getVideoTracks(),...e.getAudioTracks()]):t}let gt=[];function Ot({handleRecorded:e,recordingState:t,setRecordingState:n}){const{t:r}=Object(S.a)(),a=m(),i=Object(ae.e)(),{audioStream:d,displayStream:u,userStream:b,userUnexpectedEnd:p,displayUnexpectedEnd:g,audioUnexpectedEnd:O}=h(),j=Object(o.useRef)(null),v=Object(o.useRef)(null),x=(u||b)&&!p&&!g&&!O,f=Object(l.g)(),y=(t=!1)=>{var n,c;null===(n=j.current)||void 0===n||n.stop(),null===(c=v.current)||void 0===c||c.stop(),e(),a({type:t?"STOP_RECORDING_PREMATURELY":"STOP_RECORDING"}),gt.forEach(e=>e()),gt=[]};Object(o.useEffect)(()=>{(p||g||O)&&t===jt&&y(!0),f.listen(()=>{"STATE_INACTIVE"!==t&&a({type:"STOP_RECORDING"}),gt.forEach(e=>e()),gt=[]})});return Object(c.c)("div",{sx:{m:0,width:t!==mt?"280px":"auto"}},t!==mt&&Object(c.c)(s.a,{onBeforeunload:e=>e.preventDefault()}),Object(c.c)("div",{className:"buttons",sx:{display:"flex",alignItems:"center"}},t!==mt&&Object(c.c)("div",{sx:{flex:1,textAlign:"right"}},t===jt&&Object(c.c)(ct,{title:r("pause-button-title"),recordingState:t,onClick:()=>{n(ht),(()=>{var e,t;null===(e=j.current)||void 0===e||e.pause(),null===(t=v.current)||void 0===t||t.pause()})()}}),t===ht&&Object(c.c)(ot,{title:r("resume-button-title"),recordingState:t,onClick:()=>{n(jt),(()=>{var e,t;null===(e=j.current)||void 0===e||e.resume(),null===(t=v.current)||void 0===t||t.resume()})()}})),Object(c.c)("div",{className:"center"},t===mt?Object(c.c)(rt,{large:!0,title:r("record-button-title"),recordingState:t,onClick:()=>{x&&(n(jt),(()=>{if(a({type:"CLEAR_RECORDINGS"}),u){const e=bt(a,"desktop"),t=pt(d,u);j.current=new Xe(t,i.recording,{onStop:e}),j.current.start()}if(b){const e=bt(a,"video"),t=pt(d,b);v.current=new Xe(t,i.recording,{onStop:e}),v.current.start()}a({type:"START_RECORDING"}),gt.push(f.block(r("confirm-cancel-recording")))})())},disabled:!x}):Object(c.c)(at,{large:!0,title:r("stop-button-title"),recordingState:t,onClick:()=>{n(mt),y()}})),t!==mt&&Object(c.c)("div",{sx:{flex:1}},Object(c.c)(ut,{isPaused:t===ht}))))}const mt="inactive",ht="paused",jt="recording";function vt(e){const{t:t}=Object(S.a)(),n=h(),a=m(),i=Object(oe.n)(),[l,s]=Object(o.useState)(mt),d=Object(o.useCallback)(()=>{e.previousStep()},[e]);return Object(c.c)(r.e,{sx:{flexDirection:"column",height:"100%",position:"relative",flexGrow:1}},(n.displayUnexpectedEnd||n.userUnexpectedEnd)&&Object(c.c)(V,{isDanger:!0},Object(c.c)(r.j,null,t("error-lost-video-stream"))),n.audioUnexpectedEnd&&Object(c.c)(V,{isDanger:!0},Object(c.c)(r.j,null,t("error-lost-audio-stream"))),Object(c.c)(Ge,{recordingState:l}),Object(c.c)("div",{sx:{m:3}},Object(c.c)(M,{prev:l===mt&&{onClick:d}},Object(c.c)(Ot,{handleRecorded:()=>{i.refreshConnection(),function({audioStream:e,displayStream:t,userStream:n},c){_(e,c),L(t,c),H(n,c)}(n,a),e.nextStep()},recordingState:l,setRecordingState:s}))))}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}var ft=a.a.createElement("path",{d:"m24.6 0c-0.447 0-0.894 0.171-1.24 0.511l-3.07 3.05c-0.685 0.681-0.685 1.78 0 2.46l58.8 58.5c0.685 0.681 1.79 0.681 2.47 0l3.07-3.05c0.685-0.681 0.685-1.78 0-2.46l-6.68-6.64h22v-7.32h-15.6c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h15.6v-7.32h-56.4l-17.8-17.7c-0.343-0.341-0.79-0.511-1.24-0.511zm-24.6 18.2v7.32h3.7c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-3.7v7.32h55.8l-15.4-15.3v5.36c0 1.43-1.16 2.59-2.6 2.59h-21.8c-1.44 0-2.6-1.15-2.6-2.59v-14.3c0-1.43 1.16-2.59 2.6-2.59h12.8l-7.36-7.32zm51 7.32h21c1.44 0 2.6 1.15 2.6 2.59v14.3c0 1.43-1.16 2.59-2.6 2.59h-1.4z",fill:"currentColor"});const yt=({svgRef:e,title:t,...n})=>a.a.createElement("svg",xt({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 100 65",ref:e},n),t?a.a.createElement("title",null,t):null,ft),wt=a.a.forwardRef((e,t)=>a.a.createElement(yt,xt({svgRef:t},e)));n.p;function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}var Et=a.a.createElement("g",{fill:"currentColor"},a.a.createElement("path",{d:"m49.7 0.00188c-2.91 0.0589-5.75 1.49-7.44 4.08-1.06 1.62-1.51 3.48-1.42 5.29-0.0794 0.122-0.986 1.51-1.13 1.72-0.13-0.2-0.997-1.54-1.08-1.66 0.0951-1.81-0.348-3.67-1.4-5.29-1.68-2.59-4.51-4.04-7.42-4.11-1.75-0.0426-3.52 0.41-5.09 1.41-4.18 2.66-5.4 8.27-2.72 12.4 2.56 3.96 7.83 5.24 11.9 3.02l0.992 1.53c-2.84 4.35-4.9 7.5-6.74 10.3-3.09 4.73-1.94 8.93 2.01 11.5l9.47-14.5 9.45 14.6c3.96-2.55 5.13-6.75 2.06-11.5-1.84-2.84-3.9-6.03-6.74-10.4l1.04-1.59c4.1 2.23 9.37 0.974 12-2.97 2.03-3.1 1.85-7.03-0.114-9.93-0.656-0.968-1.51-1.82-2.55-2.49-1.56-1.01-3.33-1.47-5.08-1.43zm0.0903 5.96c0.578-0.0076 1.17 0.154 1.7 0.499 0.357 0.23 0.649 0.514 0.872 0.835 0.668 0.962 0.712 2.24 0.0174 3.31-0.926 1.42-2.74 1.8-4.17 0.882-1.43-0.919-1.82-2.73-0.889-4.14 0.579-0.886 1.51-1.37 2.47-1.38zm-20.1 0.0236c0.963 0.0168 1.89 0.504 2.46 1.39 0.92 1.42 0.525 3.22-0.906 4.14s-3.25 0.521-4.17-0.9c-0.92-1.42-0.525-3.22 0.906-4.14 0.537-0.343 1.13-0.502 1.71-0.492zm10 24.1a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm0 10.9a1.83 1.81 0 0 0-1.83 1.81v3.62a1.83 1.81 0 0 0 1.83 1.81 1.83 1.81 0 0 0 1.83-1.81v-3.62a1.83 1.81 0 0 0-1.83-1.81zm-1.5 8.8a2.43 2.42 0 0 0-2.43 2.42v35.4a2.43 2.42 0 0 0 2.43 2.42h8.94v-4.83h-6.51v-30.6h6.1v-4.83zm6.51 8.86v22.5h55.2v-4.83h-3.22c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.767-1.71 1.72-1.71h3.22v-4.83zm6.59 4.83h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.767 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.767-1.71 1.72-1.71zm22.7 0h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.767 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.761-1.72-1.71v-9.47c0-0.946 0.769-1.71 1.72-1.71z"}),a.a.createElement("path",{d:"m0 58.6v4.83h2.44c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.768 1.71-1.72 1.71h-2.44v4.83h31.8v-22.5zm10.8 4.83h14.4c0.954 0 1.72 0.762 1.72 1.71v9.47c0 0.946-0.768 1.71-1.72 1.71h-14.4c-0.954 0-1.72-0.762-1.72-1.71v-9.47c0-0.946 0.768-1.71 1.72-1.71z",opacity:.2}));const Ct=({svgRef:e,title:t,...n})=>a.a.createElement("svg",St({"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 100 90",ref:e},n),t?a.a.createElement("title",null,t):null,Et),kt=a.a.forwardRef((e,t)=>a.a.createElement(Ct,St({svgRef:t},e)));n.p;function Dt(e){const{t:t}=Object(S.a)(),n=m(),{recordings:a,prematureRecordingEnd:i,videoChoice:l}=h(),s=a.some(e=>0===e.media.size),d=Object(o.useRef)(),[u,b]=Object(o.useState)(0),[p,g]=Object(o.useState)(),O=(()=>{switch(l){case"none":return 0;case"both":return 2;default:return 1}})();return Object(c.c)($,null,Object(c.c)(j.b.h1,null,t("review-heading")),i&&Object(c.c)(V,{isDanger:!0},Object(c.c)(r.j,null,t("error-lost-stream-end-recording"))),s&&Object(c.c)(V,{isDanger:!0},t("review-error-empty-recording")),(!p||a.length!==O)&&Object(c.c)("div",{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"}},Object(c.c)(r.i,{title:t("save-creation-waiting-for-recordings")})),a.length===O&&Object(c.c)("div",{sx:p?{display:"flex",flex:"1 1 auto",flexDirection:"column"}:{display:"none"}},Object(c.c)(Pt,{ref:d,onTimeUpdate:e=>{b(e.target.currentTime)},onReady:()=>g(!0)}),Object(c.c)("div",{sx:{mb:3}}),Object(c.c)(Rt,{previewController:d,currentTime:u})),Object(c.c)("div",{sx:{mb:3}}),Object(c.c)(M,{prev:{onClick:()=>{window.confirm(t("confirm-discard-recordings"))&&(n({type:"RESET"}),e.firstStep())},danger:!0,label:"review-button-discard-and-record"},next:{onClick:()=>{e.nextStep()}}}))}const Rt=({previewController:e,currentTime:t})=>Object(c.c)("div",{sx:{backgroundColor:"gray.4",borderRadius:"8px"}},Object(c.c)(Tt,{previewController:e,currentTime:t}),Object(c.c)(At,{previewController:e,currentTime:t})),At=({previewController:e,currentTime:t})=>{var n;const r=(null===(n=e.current)||void 0===n?void 0:n.duration)||1/0,{start:o,end:a}=h(),i=t=>{const n=t.target.getBoundingClientRect();let c=(t.clientX-n.x)/n.width;c<0?c=0:c>1&&(c=1),e.current&&(e.current.currentTime=c*r)},l={position:"absolute",backgroundColor:"gray.3",height:"100%",boxSizing:"content-box"};return Object(c.c)("div",{sx:{p:2}},Object(c.c)("div",{sx:{py:1,position:"relative"}},Object(c.c)("div",{onClick:e=>i(e),onMouseMove:e=>{1===e.buttons&&i(e)},sx:{position:"absolute",width:"100%",height:"100%",cursor:"pointer",top:0,zIndex:10}}),Object(c.c)("div",{sx:{position:"relative",backgroundColor:"#6bc295",height:"12px",width:"100%",borderRadius:"6px",overflow:"hidden","@media not (any-pointer: fine)":{height:"20px",borderRadius:"10px"}}},null!=o&&o>0&&Object(c.c)("div",{sx:{left:0,borderRight:"2px solid black",width:`${o/r*100}%`,...l}}),null!=a&&a<r&&Object(c.c)("div",{sx:{right:0,borderLeft:"2px solid black",width:`${(r-a)/r*100}%`,...l}}),Object(c.c)("div",{sx:{position:"absolute",left:0,width:`${t/r*100}%`,backgroundColor:"black",height:"100%",opacity:.3}}))))},Tt=({currentTime:e,previewController:t})=>{var n,o,a,i,l;const{start:s,end:d}=h(),u=m(),b=Object(ae.e)(),{t:p}=Object(S.a)(),g=null===(n=t.current)||void 0===n?void 0:n.duration;return Object(c.c)("div",{sx:{textAlign:"center"}},Object(c.c)(r.e,{sx:{p:2,justifyContent:"center",alignItems:"flex-end","& > *":{mx:2}}},(null===(o=b.review)||void 0===o?void 0:o.disableCutting)||Object(c.c)(Ut,Object.assign({marker:"start",value:s,control:d,invariant:(e,t)=>e<t},{recordingDispatch:u,previewController:t,currentTime:e})),Object(c.c)("button",{title:(null===(a=t.current)||void 0===a?void 0:a.isPlaying)?p("review-pause"):p("review-play"),sx:{backgroundColor:"transparent",border:"none",mx:3},onClick:()=>{const e=t.current;e&&(e.isPlaying?e.pause():e.isReadyToPlay&&e.play())}},Object(c.c)(v.a,{icon:(null===(i=t.current)||void 0===i?void 0:i.isPlaying)?x.p:x.s,sx:{fontSize:"50px",opacity:.8,"&:hover":{opacity:1}}})),(null===(l=b.review)||void 0===l?void 0:l.disableCutting)||Object(c.c)(Ut,Object.assign({marker:"end",value:d,control:s,invariant:(e,t)=>t<e},{recordingDispatch:u,previewController:t,currentTime:e}))),p("review-player-progress",{currentTime:e,duration:g}))},Ut=({marker:e,value:t,control:n,invariant:a,currentTime:i,previewController:l,recordingDispatch:s})=>{const{t:d}=Object(S.a)(),u=Object(c.c)("div",{sx:{flex:1,textAlign:"start"===e?"right":"left"}},null!==t&&Object(c.c)(o.Fragment,null,Object(c.c)(ne.a,Object.assign({t:d},{i18nKey:`review-${e}`}),{[e]:t}," ",Object(c.c)(r.h,{href:"",onClick:e=>{e.preventDefault(),l.current.currentTime=t}})),Object(c.c)(r.g,{title:d("review-remove-cut-point",{context:e}),onClick:()=>s({type:`UPDATE_${e.toUpperCase()}`,payload:null})},Object(c.c)(v.a,{icon:x.y})))),b=(()=>{var e;return i<=.001||i>=(null===(e=l.current)||void 0===e?void 0:e.duration)||null!=n&&!a(i,n)})(),p=Object(c.c)("button",Object.assign({title:d(`review-set-${e}`)},{disabled:b},{onClick:()=>{let t=l.current.currentTime;null==n||a(t,n)||(t=n),s({type:`UPDATE_${e.toUpperCase()}`,payload:t})},sx:{backgroundColor:"transparent",border:"none",pt:"4px",px:"8px",borderRadius:"4px","&:disabled":{opacity:.4},"&:not(:disabled):hover":{backgroundColor:"#ddd"}}}),Object(c.c)(kt,{sx:{height:"32px",transform:"end"===e?"scaleX(-1)":""}}));return"start"===e?Object(c.c)(o.Fragment,null,u,p):Object(c.c)(o.Fragment,null,p,u)},Pt=Object(o.forwardRef)((function({onTimeUpdate:e,onReady:t},n){var r;const{recordings:a,start:i,end:l}=h(),{t:s}=Object(S.a)(),d=[Object(o.useRef)(),Object(o.useRef)()],u=d.slice(0,a.length),b=2===a.length?"desktop"===a[0].deviceType?0:1:null,p=Object(o.useRef)();Object(o.useImperativeHandle)(n,()=>({get currentTime(){return d[p.current||0].current.currentTime},set currentTime(e){u.forEach(t=>t.current.currentTime=e)},get duration(){var e;return null===(e=d[p.current||0].current)||void 0===e?void 0:e.duration},get isPlaying(){const e=d[p.current||0].current;return e&&e.currentTime>0&&!e.paused&&!e.ended},get isReadyToPlay(){return u.every(e=>e.current.readyState>=2)},play(){u.forEach(e=>e.current.play())},pause(){u.forEach(e=>e.current.pause())}}));const g=[Object(o.useRef)(),Object(o.useRef)()],[O,m]=Object(o.useState)(),j=e=>null!==i&&e<i||null!==l&&e>l,v=(null===(r=d[p.current||0].current)||void 0===r?void 0:r.currentTime)||0,x=j(v),[,f]=Object(o.useState)(x);Object(o.useEffect)(()=>{O&&t()},[t,O]),Object(o.useEffect)(()=>{if(O&&2===a.length){d[b].current.volume=0;const e=d[0].current,t=d[1].current;let n,c=0;const r=()=>{if(c%60===0){if(Math.abs(e.currentTime-t.currentTime)>.15&&null!=p.current){const e=d[p.current].current;d[0===p.current?1:0].current.currentTime=e.currentTime}}c++,n=window.requestAnimationFrame(r)};return n=window.requestAnimationFrame(r),()=>window.cancelAnimationFrame(n)}});const y=a.map((t,n)=>({body:Object(c.c)("div",{sx:{position:"relative",width:"100%",height:"100%"}},x&&Object(c.c)("div",{sx:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.65)",color:"white",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"none"}},Object(c.c)(wt,{sx:{height:"4em"}}),Object(c.c)("p",{sx:{my:3}},s("review-part-will-be-removed"))),Object(c.c)("video",{ref:d[n],key:n,src:t.url,onLoadedData:e=>{e.target.currentTime=Number.MAX_VALUE,g[n].current="started"},onTimeUpdate:O?t=>{const n=t.target.currentTime;f(j(n)),e(t)}:e=>{if(!O)switch(g[n].current){case"started":e.target.currentTime=.001,g[n].current="done";break;case"done":g.filter(e=>"done"===e.current).length===a.length&&m(!0)}},preload:"auto",sx:{width:"100%",height:"100%",backgroundColor:"#ccc",outline:"none"}})),dimensions:()=>t.dimensions}));return Object(c.c)(q,{gap:20},y)}));function It({activeStep:e,updateActiveStep:t,userHasWebcam:n}){return Object(d.e)()?Object(c.c)(A,{activeStep:e,updateActiveStep:t},Object(c.c)(Fe,{userHasWebcam:n}),Object(c.c)(Q,null),Object(c.c)(vt,null),Object(c.c)(Dt,null),Object(c.c)(de,null)):null}var _t=[{short:"en",long:"English",rtl:!1},{short:"de",long:"Deutsch",rtl:!1},{short:"nl",long:"Dutch",rtl:!1},{short:"el",long:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",rtl:!1},{short:"es",long:"Espa\xf1ol",rtl:!1},{short:"fa",long:"Farsi",rtl:!0},{short:"fr",long:"Fran\xe7ais",rtl:!1},{short:"sl",long:"Sloven\u0161\u010dina",rtl:!1},{short:"tr",long:"Turkish",rtl:!1}];const Lt=({title:e,children:t})=>Object(c.c)(r.a,{sx:{"&:not(:last-child)":{mb:5}}},Object(c.c)(j.b.h2,{sx:{borderBottom:e=>`1px solid ${e.colors.gray[2]}`,pb:1,my:3,mx:0}},e),t);var Ht=()=>{const{i18n:e}=Object(S.a)();return Object(c.c)(Lt,{title:"Language"},Object(c.c)("select",{sx:{variant:"styles.select"},defaultValue:e.language,onChange:t=>e.changeLanguage(t.target.value)},_t.map(e=>Object(c.c)("option",{value:e.short,key:e.short},e.long))))};var zt=function({settingsManager:e}){const t=Object(l.h)(),{t:n}=Object(S.a)(),a=Object(oe.n)(),[s,d]=Object(o.useState)(),{errors:u,handleSubmit:b,register:p}=Object(ce.a)({defaultValues:e.formValues().opencast}),[g,O]=Object(o.useState)("initial"),{recordings:m}=h(),j=m.length>0,f=e.isConfigurable("opencast.serverUrl"),y=e.isUsernameConfigurable(),w=e.isPasswordConfigurable();if(!f&&!y&&!w)return null;const E={testing:x.f,error:x.j,saved:x.d}[g];return Object(c.c)(Lt,{title:n("upload-settings-modal-header")},Object(c.c)(r.a,null,s&&Object(c.c)(V,{isDanger:!0},s),Object(c.c)("form",{onSubmit:b((async function(t){O("testing");const c=await oe.a.init({...e.settings().opencast,...t});switch(c.getState()){case oe.f:a.setGlobalInstance(c),e.saveSettings({opencast:t}),O("saved"),d(null);break;case oe.g:O("error"),d(n("upload-settings-error-server-unreachable"));break;case oe.h:O("error"),d(n("upload-settings-error-response-not-ok"));break;case oe.e:O("error"),d(n("upload-settings-error-invalid-response"));break;case oe.d:O("error"),a.isLoginProvided()?d(n("upload-settings-invalid-provided-login")):d(n("upload-settings-invalid-login-data"));break;case oe.c:case oe.i:default:console.error("bug: invalid state reached..."),O("error"),d("internal error :(")}}))},f&&Object(c.c)(ie,{errors:u,label:n("upload-settings-label-server-url"),name:"serverUrl",register:p,validate:e=>{try{const t=new URL(e);return"https:"===t.protocol||"http:"===t.protocol||n("upload-settings-invalid-url-http-start")}catch(t){let c=n("upload-settings-invalid-url");return e.startsWith("https://")||e.startsWith("http://")||(c+=" "+n("upload-settings-invalid-url-http-start")),c}},required:!0}),y&&Object(c.c)(ie,{errors:u,label:n("upload-settings-label-username"),name:"loginName",register:p,required:!0}),w&&Object(c.c)(ie,{errors:u,label:n("upload-settings-label-password"),name:"loginPassword",register:p,required:!0,type:"password"}),Object(c.c)("footer",{sx:{mt:4}},Object(c.c)(r.b,{title:n("upload-settings-button-store"),sx:{verticalAlign:"middle"}},n("upload-settings-button-store")),E&&Object(c.c)(v.a,{icon:E,sx:{ml:"10px",fontSize:"30px",verticalAlign:"middle"},spin:"testing"===g}),j&&"saved"===g&&Object(c.c)(i.b,{to:{pathname:"/",search:t.search},sx:{ml:3,variant:"styles.a"}},n("settings-back-to-recording"))))))};var Nt=({settingsManager:e})=>{const{t:t}=Object(S.a)();return Object(c.c)(r.a,{sx:{width:"100%",maxWidth:960,mx:"auto",p:3}},Object(c.c)("header",null,Object(c.c)(j.b.h1,null,t("settings-header"))),Object(c.c)(Ht,null),Object(c.c)(zt,{settingsManager:e}))};var Wt=()=>{const{t:e}=Object(S.a)();let t=[];return"https:"!==window.location.protocol&&"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname&&t.push(Object(c.c)(V,{key:"unsecure-connection",isDanger:!0},e("warning-https"))),Object(d.e)()||t.push(Object(c.c)(V,{key:"media-recorder",isDanger:!0},e("warning-recorder-not-supported"),Object(d.h)()&&" "+e("warning-recorder-safari-hint"))),t.length>0?Object(c.c)("div",{sx:{p:3}},t):null},Ft=n(202),$t=n.n(Ft),Mt=n(211),Bt=n.n(Mt);function Gt(){const[e,t]=Object(o.useState)(""),[n,c]=Object(o.useState)(""),[r,i]=Object(o.useState)(""),[l,s]=Object(o.useState)("Client"),[d,u]=Object(o.useState)("");return a.a.createElement("div",null,a.a.createElement(te.c,null,a.a.createElement(te.a,{p:3,bg:"light",sx:{flex:"1 1 auto"},marginLeft:"30%",marginRight:"30%",marginTop:"5%",as:"form",onSubmit:e=>e.preventDefault()},a.a.createElement(j.b.h1,null,"Sign up for Eduscope Express"),a.a.createElement(te.e,{htmlFor:"firstName"},"First Name"),a.a.createElement(te.d,{name:"firstName",mb:3,value:e,onChange:e=>{t(e.target.value)}}),a.a.createElement(te.e,{htmlFor:"lastName"},"Last Name"),a.a.createElement(te.d,{name:"lastName",mb:3,value:n,onChange:e=>{c(e.target.value)}}),a.a.createElement(te.e,{htmlFor:"email"},"Email"),a.a.createElement(te.d,{name:"email",mb:3,value:r,onChange:e=>{i(e.target.value)}}),a.a.createElement(te.e,{htmlFor:"password",name:"",value:""},"Password"),a.a.createElement(te.d,{type:"password",name:"password",mb:3,onChange:e=>{u(e.target.value)}}),a.a.createElement(te.b,{mr:2,sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",m:0,px:4,py:2,border:0,borderRadius:4},onClick:()=>{const o={firstName:e,lastName:n,email:r,password:d,userType:l};return console.log(o),$t.a.post("/users/register",{firstName:e,lastName:n,email:r,password:d,userType:l}).then(e=>(null!=e.data&&Bt()({title:"Done",text:"Registered Successfully",icon:"success",button:!0}),e.data)).then(e=>{t(""),c(""),i(""),u(""),s("")}).catch(e=>{console.log(e),403===e.response.status&&Bt()({title:"Oops!!!",text:"User Email Already Exists",icon:"error",button:"Back to Login"})})}},"Register"),a.a.createElement(te.b,{mr:2,sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",ml:"49%",px:4,py:2,border:0,borderRadius:4,variant:"buttons.danger"}},"Reset"))))}function qt(){const[e,t]=Object(o.useState)(""),[n,c]=Object(o.useState)("");return a.a.createElement("div",null,a.a.createElement(te.c,null,a.a.createElement(te.a,{p:3,bg:"light",sx:{flex:"1 1 auto"},marginLeft:"30%",marginRight:"30%",marginTop:"5%",as:"form",onSubmit:e=>e.preventDefault()},a.a.createElement(j.b.h1,null,"Sign in for Eduscope Express"),a.a.createElement(te.e,{htmlFor:"email"},"Email"),a.a.createElement(te.d,{name:"email",mb:3,value:e,onChange:e=>{t(e.target.value)}}),a.a.createElement(te.e,{htmlFor:"password",name:"",value:""},"Password"),a.a.createElement(te.d,{type:"password",name:"password",mb:3,onChange:e=>{c(e.target.value)}}),a.a.createElement(te.b,{mr:2,sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",m:0,px:4,py:2,border:0,borderRadius:4},onClick:()=>{const r={email:e,password:n};console.log(r),$t.a.post("/users/login",{email:e,password:n}).then(e=>{localStorage.setItem("userLoginToken",e.data.token),window.location.replace("/")}).then(e=>{t(""),c("")}).catch(e=>{400===e.response.status?Bt()({title:"Oops!!!",text:"Your Password is Incorrect",icon:"error",button:!0}):404===e.response.status&&Bt()({title:"Oops!!!",text:"User Does not Exist in the System",icon:"error",button:!0})})}},"Login"),a.a.createElement(te.b,{mr:2,sx:{appearance:"none",display:"inline-block",textAlign:"center",lineHeight:"inherit",textDecoration:"none",fontSize:"inherit",fontWeight:"bold",ml:"49%",px:4,py:2,border:0,borderRadius:4,variant:"buttons.danger"}},"Reset"))))}const Vt=({settingsManager:e,userHasWebcam:t})=>{const[n,r]=Object(o.useState)(0),a=Object(l.h)();return Object(c.c)(o.Fragment,null,Object(c.c)(Kt,null),Object(c.c)(l.d,null,Object(c.c)(l.b,{path:"/settings",exact:!0},Object(c.c)(Nt,{settingsManager:e})),Object(c.c)(l.b,{path:"/about",exact:!0},Object(c.c)(y,null)),Object(c.c)(l.b,{path:"/register",exact:!0},Object(c.c)(Gt,null)),Object(c.c)(l.b,{path:"/login",exact:!0},Object(c.c)(qt,null)),Object(c.c)(l.b,{path:"/"},Object(c.c)(It,{activeStep:n,updateActiveStep:r,userHasWebcam:t})),Object(c.c)(l.b,{path:"/*"},Object(c.c)(l.a,{to:{pathname:"/",search:a.search}}))))},Kt=()=>{const{recordings:e,upload:t}=h(),n=e.every(e=>e.downloaded),r="uploaded"===t.state,o="uploading"===t.state;return Object(c.c)(s.a,{onBeforeunload:t=>{((null===e||void 0===e?void 0:e.length)>0&&!r&&!n||o)&&t.preventDefault()}})};t.default=function({settingsManager:e,userHasWebcam:t}){return Object(c.c)(i.a,{basename:"/"},Object(c.c)(O,null,Object(c.c)(r.e,{sx:{flexDirection:"column",height:"100%"}},Object(c.c)(C,null),Object(c.c)("main",{sx:{flex:1,display:"flex",flexDirection:"column",minHeight:"285px"}},Object(c.c)(Wt,null),Object(c.c)(Vt,{settingsManager:e,userHasWebcam:t})))))}}}]);
//# sourceMappingURL=4.4c5b6c48.chunk.js.map